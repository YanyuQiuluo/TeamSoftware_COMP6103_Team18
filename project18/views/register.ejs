<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Registration</title>
    <link rel="stylesheet" href="/stylesheets/login.css" type="text/css">
</head>
<body>
<div class="dowebok">
    <div class="logo"></div>
    <div class="form-item">
        <input id="username" type="text" autocomplete="off" placeholder="username">
        <p class="tip1">Please enter a username</p>
    </div>
    <div class="form-item">
        <input id="password" type="password" autocomplete="off" placeholder="password">
        <p class="tip2">Please enter a password</p>
    </div>
    <div class="form-item"><button id="submit">Registration</button></div>
    <div class="reg-bar">
        <a class="reg" href="/loginPage" target="_self">Sign in</a>
        <a class="forget" href="#" target="_blank">Forgot password?</a>
    </div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
    $('#submit').on('click', function () {
        $('.tip1').css('display','none');
        $('.tip2').css('display','none');
        let usn = document.getElementById("username").value
        let psd = document.getElementById("password").value
        if (!usn && !psd) {
            $('.tip1').show()
            $('.tip2').show()
        } else if (!usn) {
            $('.tip1').show()
        } else if (!psd) {
            $('.tip2').show()
        } else {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/register',
                dataType : 'json',
                data: {
                    userName: usn,
                    password: psd
                },
                success: function(res){
                    window.location.href="http://localhost:3000"
                }
            });
        }
    })
</script>
</body>
</html>